######################################################################################################
# BUG#18900932 : ERROR MESSAGE ISN'T SENT TO CLIENT WHEN SERVER REPORTS ONE
######################################################################################################
SELECT ST_AREA(ST_GEOMFROMTEXT('POLYGON((0 0,5 5))'));
ERROR 22023: Invalid GIS data provided to function st_area.
SELECT ST_AREA(ST_GEOMFROMTEXT('POLYGON((4 4,6 4,8 4,4 4))'));
ERROR 22023: Invalid GIS data provided to function st_area.
######################################################################################################
# BUG#18911154 : CENTROID() RETURNING ERROR MESSAGE FOR VALID GEOMETRY-COLLECTION GEOMETRY
######################################################################################################
SELECT ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('MULTIPOINT(0 0,10 10)')));
ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('MULTIPOINT(0 0,10 10)')))
POINT(5 5)
SELECT ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('POLYGON((0 0,0 10,10 10,10 0,0 0))')));
ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('POLYGON((0 0,0 10,10 10,10 0,0 0))')))
POINT(5 5)
SELECT ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(MULTIPOINT(0 0,10 10))')));
ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(MULTIPOINT(0 0,10 10))')))
POINT(5 5)
SELECT ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(POLYGON((0 0,0 10,10 10,10 0,0 0)))')));
ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(POLYGON((0 0,0 10,10 10,10 0,0 0)))')))
POINT(5 5)
######################################################################################################
# BUG#18919820 : CONVEXHULL() FUNCTION PRODUCES INVALID POLYGON AS THE RESULT
######################################################################################################
SELECT ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('MULTIPOINT(5 0,25 0,15 10,15 25)')));
ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('MULTIPOINT(5 0,25 0,15 10,15 25)')))
POLYGON((5 0,25 0,15 25,5 0))
SELECT ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('POLYGON((5 0,15 25,25 0,15 5,5 0))')));
ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('POLYGON((5 0,15 25,25 0,15 5,5 0))')))
POLYGON((5 0,25 0,15 25,5 0))
SELECT ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('MULTIPOLYGON(((0 0,0 10,10 10,10 0,0 0)),((4 4,4 6,6 6,6 4,4 4)))')));
ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('MULTIPOLYGON(((0 0,0 10,10 10,10 0,0 0)),((4 4,4 6,6 6,6 4,4 4)))')))
POLYGON((0 0,10 0,10 10,0 10,0 0))
######################################################################################################
# BUG#18935403 : SPATIAL ANALYSIS FUNCTIONS NOT RETURNING CONSISTENT RESULTS
######################################################################################################
SELECT ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION()')));
ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION()')))
NULL
SELECT ST_ASTEXT(ST_ENVELOPE(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION()')));
ST_ASTEXT(ST_ENVELOPE(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION()')))
NULL
SELECT ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION()')));
ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION()')))
NULL
SELECT ST_DISTANCE(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION()'),ST_GEOMFROMTEXT('GEOMETRYCOLLECTION()'));
ST_DISTANCE(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION()'),ST_GEOMFROMTEXT('GEOMETRYCOLLECTION()'))
NULL
SELECT ST_DISTANCE(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION()'),ST_GEOMFROMTEXT('POINT(10 10)'));
ST_DISTANCE(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION()'),ST_GEOMFROMTEXT('POINT(10 10)'))
NULL
SELECT ST_DISTANCE(ST_GEOMFROMTEXT('POINT(10 10)'),ST_GEOMFROMTEXT('GEOMETRYCOLLECTION()'));
ST_DISTANCE(ST_GEOMFROMTEXT('POINT(10 10)'),ST_GEOMFROMTEXT('GEOMETRYCOLLECTION()'))
NULL
######################################################################################################
# BUG#18957010 : CONVEXHULL() FUNCTION RETURNS WRONG RESULT
######################################################################################################
SELECT ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('MULTIPOINT(5 -3,0 2,5 7,10 2,10 0,10 -2)')));
ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('MULTIPOINT(5 -3,0 2,5 7,10 2,10 0,10 -2)')))
POLYGON((0 2,5 -3,10 -2,10 2,5 7,0 2))
SELECT ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('MULTIPOINT(5 0,0 5,5 10,10 5,10 -5)')));
ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('MULTIPOINT(5 0,0 5,5 10,10 5,10 -5)')))
POLYGON((0 5,10 -5,10 5,5 10,0 5))
SELECT ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('MULTIPOINT(2 -5,2 5,8 5,8 2,8 0)')));
ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('MULTIPOINT(2 -5,2 5,8 5,8 2,8 0)')))
POLYGON((2 -5,8 0,8 5,2 5,2 -5))
######################################################################################################
# BUG#18972363 : CENTROID() FUNCTION RETURNS INCORRECT RESULT
######################################################################################################
SELECT ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(LINESTRING(0 0,0 10,10 10,10 0),LINESTRING(0 0,10 0,10 -10,0 -10))')));
ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(LINESTRING(0 0,0 10,10 10,10 0),LINESTRING(0 0,10 0,10 -10,0 -10))')))
POINT(5.833333333333333 0.8333333333333334)
SELECT ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(LINESTRING(0 0,10 0,10 10,0 10),LINESTRING(0 0,10 0,10 -10,0 -10))')));
ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(LINESTRING(0 0,10 0,10 10,0 10),LINESTRING(0 0,10 0,10 -10,0 -10))')))
POINT(6.666666666666667 0)
SELECT ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(POLYGON((0 0,0 10,10 10,10 0,0 0)),POLYGON((0 0,10 0,10 -10,0 -10,0 0)))')));
ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(POLYGON((0 0,0 10,10 10,10 0,0 0)),POLYGON((0 0,10 0,10 -10,0 -10,0 0)))')))
POINT(5 0)
SELECT ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(LINESTRING(0 0,0 10,10 10,10 0,0 0),LINESTRING(0 0,10 0,10 -10,0 -10,0 0))')));
ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(LINESTRING(0 0,0 10,10 10,10 0,0 0),LINESTRING(0 0,10 0,10 -10,0 -10,0 0))')))
POINT(5 0)
######################################################################################################
# BUG#18991528 : LONGFROMGEOHASH() DECODING FUNCTION ACCEPTS NON-STRING VALUE AS THE ARGUMENT
######################################################################################################
SELECT ST_LONGFROMGEOHASH(0123456789);
ERROR HY000: Incorrect type for argument geohash in function ST_LONGFROMGEOHASH.
SELECT ST_LONGFROMGEOHASH(9876543210);
ERROR HY000: Incorrect type for argument geohash in function ST_LONGFROMGEOHASH.
SELECT ST_LONGFROMGEOHASH(1);
ERROR HY000: Incorrect type for argument geohash in function ST_LONGFROMGEOHASH.
######################################################################################################
# BUG#19019796 : LONGFROMGEOHASH() AND LATFROMGEOHASH() FUNCTIONS RETURN -0 AS THE RESULT
######################################################################################################
SELECT ST_LONGFROMGEOHASH("GZZZZZZZZZZZZZZZZZZZ");
ST_LONGFROMGEOHASH("GZZZZZZZZZZZZZZZZZZZ")
0
SELECT ST_LONGFROMGEOHASH("7ZZZZZZZZZZZZZZZZZZZ");
ST_LONGFROMGEOHASH("7ZZZZZZZZZZZZZZZZZZZ")
0
SELECT ST_LATFROMGEOHASH("7ZZZZZZZZZZZZZZZZZZZ");
ST_LATFROMGEOHASH("7ZZZZZZZZZZZZZZZZZZZ")
0
SELECT ST_LATFROMGEOHASH("RZZZZZZZZZZZZZZZZZZZ");
ST_LATFROMGEOHASH("RZZZZZZZZZZZZZZZZZZZ")
0
######################################################################################################
# BUG#19076184 : ST_GEOHASH() FUNCTION ACCEPTS NON-INTEGER VALUES FOR MAXLENGTH PARAMETER
######################################################################################################
SELECT ST_GEOHASH(180,90,10.1);
ERROR HY000: Incorrect type for argument geohash max length in function st_geohash.
SELECT ST_GEOHASH(ST_GEOMFROMTEXT('POINT(180 90)'),20.0001);
ERROR HY000: Incorrect type for argument geohash max length in function st_geohash.
SELECT ST_GEOHASH(ST_GEOMFROMTEXT('POINT(180 90)'),(CAST(10 AS BINARY)));
ERROR HY000: Incorrect type for argument geohash max length in function st_geohash.
######################################################################################################
# BUG#19133043 : REPRESENTATION OF THE SAME POINT GEOMETRY ISSUE WITH SPATIAL ANALYSIS FUNCTIONS
######################################################################################################
SELECT ST_ASTEXT(ST_ENVELOPE(ST_GEOMFROMTEXT('POINT(-0 0)')));
ST_ASTEXT(ST_ENVELOPE(ST_GEOMFROMTEXT('POINT(-0 0)')))
POLYGON((0 0,0 0,0 0,0 0,0 0))
SELECT ST_ASTEXT(ST_ENVELOPE(ST_GEOMFROMTEXT('POINT(0 -0)')));
ST_ASTEXT(ST_ENVELOPE(ST_GEOMFROMTEXT('POINT(0 -0)')))
POLYGON((0 0,0 0,0 0,0 0,0 0))
SELECT ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('POINT(0 -0)')));
ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('POINT(0 -0)')))
POINT(0 0)
SELECT ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('POINT(-0 0)')));
ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('POINT(-0 0)')))
POINT(0 0)
######################################################################################################
# BUG#19142227 : ENVELOPE() SPATIAL ANALYSIS FUNCTION ACCEPTS INVALID POLYGONS AS THE ARGUMENT
######################################################################################################
SELECT ST_ASTEXT(ST_ENVELOPE(ST_GEOMFROMTEXT('POLYGON((0 0))')));
ERROR 22023: Invalid GIS data provided to function st_envelope.
SELECT ST_ASTEXT(ST_ENVELOPE(ST_GEOMFROMTEXT('POLYGON((0 0,5 5))')));
ERROR 22023: Invalid GIS data provided to function st_envelope.
SELECT ST_ASTEXT(ST_ENVELOPE(ST_GEOMFROMTEXT('POLYGON((0 0,5 5,10 10))')));
ERROR 22023: Invalid GIS data provided to function st_envelope.
SELECT ST_ASTEXT(ST_ENVELOPE(ST_GEOMFROMTEXT('MULTIPOLYGON(((0 0,5 5)),((1 1,1 1,1 1,1 1)))')));
ERROR 22023: Invalid GIS data provided to function st_envelope.
######################################################################################################
# BUG#19154955 : ST_GEOHASH() FUNCTION RETURNS BINARY DATA INSTEAD OF TEXT WITH A CHARSET
######################################################################################################
SELECT ST_LONGFROMGEOHASH(ST_GEOHASH(ST_GEOMFROMTEXT('POINT(10 10)'),10));
ST_LONGFROMGEOHASH(ST_GEOHASH(ST_GEOMFROMTEXT('POINT(10 10)'),10))
10
SELECT ST_LATFROMGEOHASH(ST_GEOHASH(ST_GEOMFROMTEXT('POINT(10 10)'),10));
ST_LATFROMGEOHASH(ST_GEOHASH(ST_GEOMFROMTEXT('POINT(10 10)'),10))
10
SELECT ST_ASTEXT(ST_POINTFROMGEOHASH(ST_GEOHASH(ST_GEOMFROMTEXT('POINT(10 10)'),10),10));
ST_ASTEXT(ST_POINTFROMGEOHASH(ST_GEOHASH(ST_GEOMFROMTEXT('POINT(10 10)'),10),10))
POINT(10 10)
######################################################################################################
# BUG#19204199 : DISTANCE() AND ENVELOPE() FUNCTIONS RETURN WRONG RESULT
######################################################################################################
SELECT ST_DISTANCE(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(LINESTRING(0 0,10 10,20 20))'),ST_GEOMFROMTEXT('LINESTRING(5 0,10 0)'));
ST_DISTANCE(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(LINESTRING(0 0,10 10,20 20))'),ST_GEOMFROMTEXT('LINESTRING(5 0,10 0)'))
3.5355339059327373
SELECT ST_DISTANCE(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(LINESTRING(0 0,10 10,20 20),GEOMETRYCOLLECTION())'),ST_GEOMFROMTEXT('LINESTRING(5 0,10 0)'));
ST_DISTANCE(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(LINESTRING(0 0,10 10,20 20),GEOMETRYCOLLECTION())'),ST_GEOMFROMTEXT('LINESTRING(5 0,10 0)'))
0
SELECT ST_ASTEXT(ST_ENVELOPE(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(LINESTRING(0 0,0 10,10 10))')));
ST_ASTEXT(ST_ENVELOPE(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(LINESTRING(0 0,0 10,10 10))')))
POLYGON((0 0,10 0,10 10,0 10,0 0))
SELECT ST_ASTEXT(ST_ENVELOPE(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(LINESTRING(0 0,0 10,10 10),GEOMETRYCOLLECTION())')));
ST_ASTEXT(ST_ENVELOPE(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(LINESTRING(0 0,0 10,10 10),GEOMETRYCOLLECTION())')))
POLYGON((0 0,10 0,10 10,0 10,0 0))
######################################################################################################
# BUG#19223763 : ST_ASGEOJSON() GIVES SAME MAX DECIMAL DIGIT VALUE IN THE ERROR MESSAGE
######################################################################################################
SELECT ST_ASGEOJSON(ST_GEOMFROMTEXT('POINT(10.12345678901234567890 10)'),-1);
ERROR HY000: Incorrect max decimal digits value: '-1' for function st_asgeojson
SELECT ST_ASGEOJSON(ST_GEOMFROMTEXT('POINT(10.12345678901234567890 10)'),-1000);
ERROR HY000: Incorrect max decimal digits value: '-1000' for function st_asgeojson
SELECT ST_ASGEOJSON(ST_GEOMFROMTEXT('POINT(10.12345678901234567890 10)'),2147483648);
ERROR HY000: Incorrect max decimal digits value: '2147483648' for function st_asgeojson
SELECT ST_ASGEOJSON(ST_GEOMFROMTEXT('POINT(10.12345678901234567890 10)'),1000000000000000000000000);
ERROR HY000: Incorrect type for argument max decimal digits in function st_asgeojson.
######################################################################################################
# BUG#19304320 : CENTROID() AND CONVEXHULL() FUNCTIONS RETURN NULL WITH VALID GEOMETRY INPUT
######################################################################################################
SELECT ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(POLYGON((0 0,0 10,10 10,10 0,0 0)))')));
ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(POLYGON((0 0,0 10,10 10,10 0,0 0)))')))
POINT(5 5)
SELECT ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(GEOMETRYCOLLECTION(),POLYGON((0 0,0 10,10 10,10 0,0 0)))')));
ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(GEOMETRYCOLLECTION(),POLYGON((0 0,0 10,10 10,10 0,0 0)))')))
POINT(5 5)
SELECT ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(POLYGON((0 0,0 10,10 10,10 0,0 0)))')));
ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(POLYGON((0 0,0 10,10 10,10 0,0 0)))')))
POLYGON((0 0,10 0,10 10,0 10,0 0))
SELECT ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(GEOMETRYCOLLECTION(),POLYGON((0 0,0 10,10 10,10 0,0 0)))')));
ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(GEOMETRYCOLLECTION(),POLYGON((0 0,0 10,10 10,10 0,0 0)))')))
POLYGON((0 0,10 0,10 10,0 10,0 0))
######################################################################################################
# BUG#19331370 : ST_GEOMFROMGEOJSON() FUNCTION RETURNS BINARY DATA INSTEAD GEOMETRY DATA
######################################################################################################
SELECT ST_ASGEOJSON(ST_GEOMFROMGEOJSON(
"{ \"type\": \"Point\", \"coordinates\": [10, 15] }"));
ST_ASGEOJSON(ST_GEOMFROMGEOJSON(
"{ \"type\": \"Point\", \"coordinates\": [10, 15] }"))
{"type":"Point","coordinates":[10,15]}
SELECT ST_ASGEOJSON(ST_GEOMFROMGEOJSON(
"{ \"type\": \"LineString\", \"coordinates\": [ [102.0, 0.0], [103.0, 1.0], [104.0, 0.0], [105.0, 1.0] ]}"));
ST_ASGEOJSON(ST_GEOMFROMGEOJSON(
"{ \"type\": \"LineString\", \"coordinates\": [ [102.0, 0.0], [103.0, 1.0], [104.0, 0.0], [105.0, 1.0] ]}"))
{"type":"LineString","coordinates":[[102,0],[103,1],[104,0],[105,1]]}
SELECT ST_ASGEOJSON(ST_GEOMFROMGEOJSON(
"{ \"type\": \"MultiPoint\", \"coordinates\": [ [-105.01, 39.57],[-80.66, 35.0] ] }"));
ST_ASGEOJSON(ST_GEOMFROMGEOJSON(
"{ \"type\": \"MultiPoint\", \"coordinates\": [ [-105.01, 39.57],[-80.66, 35.0] ] }"))
{"type":"MultiPoint","coordinates":[[-105.01,39.57],[-80.66,35]]}
SELECT CHARSET(ST_GEOMFROMGEOJSON(
"{ \"type\": \"MultiPoint\", \"coordinates\": [ [-105.01, 39.57],[-80.66, 35.0] ] }"));
CHARSET(ST_GEOMFROMGEOJSON(
"{ \"type\": \"MultiPoint\", \"coordinates\": [ [-105.01, 39.57],[-80.66, 35.0] ] }"))
binary
SELECT CHARSET(ST_GEOMFROMGEOJSON(
"{ \"type\": \"LineString\", \"coordinates\": [ [102.0, 0.0], [103.0, 1.0], [104.0, 0.0], [105.0, 1.0] ]}"));
CHARSET(ST_GEOMFROMGEOJSON(
"{ \"type\": \"LineString\", \"coordinates\": [ [102.0, 0.0], [103.0, 1.0], [104.0, 0.0], [105.0, 1.0] ]}"))
binary
######################################################################################################
# BUG#19341961 : ASSERTION `COORDINATES->ISARRAY()' FAILED
######################################################################################################
SELECT ST_ASTEXT(ST_GEOMFROMGEOJSON(
"{ \"type\": \"Polygon\", \"coordinates\": [[1, 1], [1, 10], [10, 10], [1, 1]] }"));
ERROR HY000: Invalid GeoJSON data provided to function st_geomfromgeojson
######################################################################################################
# BUG#19342661 : ASSERTION `OBJECT->ISOBJECT()' FAILED
######################################################################################################
SELECT ST_ASTEXT(ST_GEOMFROMGEOJSON(
"{ \"type\": \"GeometryCollection\", \"geometries\": [[]] }"));
ERROR HY000: Invalid GeoJSON data provided to function st_geomfromgeojson: Member 'geometries' must be of type 'object array'
######################################################################################################
# BUG#19351967 : CENTROID() AND COVEXHULL() ACCEPTS GEOMETRYCOLLECTION CONTAINING INVALID POLYGON
######################################################################################################
SELECT ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(POLYGON((0 0)))')));
ERROR 22023: Invalid GIS data provided to function st_centroid.
SELECT ST_ASTEXT(ST_CENTROID(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(POLYGON((0 0,5 5,10 10)))')));
ERROR 22023: Invalid GIS data provided to function st_centroid.
######################################################################################################
# BUG#19498377 : ST_GEOMFROMGEOJSON() FUNCTION ACCEPTS INVALID GEOJSON VALUE
######################################################################################################
SELECT ST_ASTEXT(ST_GEOMFROMGEOJSON(
"{ \"type1234567890\": \"Point\", \"coordinates\": [102, 11]}"));
ERROR HY000: Invalid GeoJSON data provided to function st_geomfromgeojson: Missing required member 'type'
SELECT ST_ASTEXT(ST_GEOMFROMGEOJSON(
"{ \"typeabcdefghijkl\": \"Point\", \"coordinates\": [102, 11]}"));
ERROR HY000: Invalid GeoJSON data provided to function st_geomfromgeojson: Missing required member 'type'
######################################################################################################
# BUG#19499584 : RAPIDJSON DOES NOT PARSE ALL NUMBERS WITH TRAILING ZEROS PROPERLY
######################################################################################################
SELECT ST_ASTEXT(ST_GEOMFROMGEOJSON(
"{ \"type\": \"Point\", \"coordinates\": [102.0000, 11]}"));
ST_ASTEXT(ST_GEOMFROMGEOJSON(
"{ \"type\": \"Point\", \"coordinates\": [102.0000, 11]}"))
POINT(102 11)
SELECT ST_ASTEXT(ST_GEOMFROMGEOJSON(
"{ \"type\": \"Point\", \"coordinates\": [102.00000, 11]}"));
ST_ASTEXT(ST_GEOMFROMGEOJSON(
"{ \"type\": \"Point\", \"coordinates\": [102.00000, 11]}"))
POINT(102 11)
SELECT ST_ASTEXT(ST_GEOMFROMGEOJSON(
"{ \"type\": \"Point\", \"coordinates\": [102.000000, 11]}"));
ST_ASTEXT(ST_GEOMFROMGEOJSON(
"{ \"type\": \"Point\", \"coordinates\": [102.000000, 11]}"))
POINT(102 11)
######################################################################################################
# BUG#19549099 : VIRTUAL CONST CHAR* ITEM_FUNC_SPATIAL_MBR_REL::FUNC_NAME() CONST: ASSERTION `0'
######################################################################################################
SELECT MBRCOVERS(ST_GEOMFROMTEXT('POINT(0 0)'), ST_GEOMFROMTEXT('POINT(1 1)',100));
ERROR HY000: Binary geometry function mbrcovers given two geometries of different srids: 0 and 100, which should have been identical.
######################################################################################################
# BUG#19552241 : MBRTOUCHES() FUNCTION RETURNS INCORRECT RESULT
######################################################################################################
SELECT MBRTOUCHES(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(LINESTRING(5 0,5 10),GEOMETRYCOLLECTION())'), ST_GEOMFROMTEXT('LINESTRING(5 0,5 10)'));
MBRTOUCHES(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(LINESTRING(5 0,5 10),GEOMETRYCOLLECTION())'), ST_GEOMFROMTEXT('LINESTRING(5 0,5 10)'))
0
SELECT MBRTOUCHES(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(MULTIPOINT(5 0,5 10),GEOMETRYCOLLECTION())'), ST_GEOMFROMTEXT('MULTIPOINT(5 0,5 10)'));
MBRTOUCHES(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(MULTIPOINT(5 0,5 10),GEOMETRYCOLLECTION())'), ST_GEOMFROMTEXT('MULTIPOINT(5 0,5 10)'))
0
######################################################################################################
# BUG#19784515 : ASSERTION `DIM1 >= 0 && DIM1 <= 2 && DIM2 >= 0 && DIM2 <= 2' FAILED
######################################################################################################
SELECT MBRWITHIN(
ST_CENTROID(
ST_UNION(
ST_UNION(
ST_GEOMFROMTEXT(
'MULTILINESTRING((-556 966,-721 -210),'
                                    '(-202 390,-954 804,682 504,-394 -254,832 371,907 -369,827 126,-567 -337,-304 -555,-957 -483,-660 792),'
                                    '(-965 -940,814 -804,-477 -909,-128 57,-819 880,761 497,-559 40,-431 427,179 -291,-707 315,137 -781,-416 -371,-5 -156),'
                                    '(-600 -570,-481 -191,991 -361,768 888,-647 566,795 -861,-82 -575,-593 539))'),
ST_GEOMFROMTEXT(
'MULTIPOLYGON(((805 69,249 708,147 455,546 -672,-218 843,458 24,-630 -420,-83 -69)),'
                                 '((196 -219,-201 663,-867 521,-910 -315,-749 801,-402 820,-167 -817,-526 -163,744 -988,-588 -370,573 695,-597 513,-246 439)),'
                                 '((32 -903,189 -871,-778 -741,784 340,403 -555,607 -540,-513 -982,700 -124,344 732,714 151,-812 -252,-440 -895,-426 231,-819 -357)),'
                                 '((-395 830,454 -143,788 -279,618 -843,-490 -507,-224 17)))')),
ST_INTERSECTION(
ST_UNION(
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION('
                            'POINT(-169 -570),'
                            'MULTIPOINT(384 290,-601 123,408 86,-616 -300,160 -474,-979 -4,-63 -824,-689 -765,-219 802,-54 -93,191 -982,-723 -449),'
                            'MULTILINESTRING((683 4,864 -634,548 -891,727 -691,-570 32,-334 -438,127 -317,241 -12,-807 947,-987 693,-345 -867,854 -106)),'
                            'MULTIPOINT(384 290,-601 123,408 86,-616 -300,160 -474,-979 -4,-63 -824,-689 -765,-219 802,-54 -93,191 -982,-723 -449),'
                            'MULTIPOLYGON(((266 51,851 523,-781 366,-607 -581)),'
                                         '((416 -450,-973 880,103 226,-896 -857,-369 761)),'
                                         '((168 171,26 -99,-606 -490,-174 -138,-325 -218,-833 -652,-255 -445,-882 -762,-202 -560)),'
                                         '((-423 -216,-531 -190,-147 821,362 441,645 -128,-997 708,134 -426,714 -9,147 842,-887 -870,688 -330,689 17,-314 -262,401 -112,-606 761)),'
                                         '((-582 -373,-360 -84,-727 -171,412 -660,750 -846,-464 718,163 -11,489 -659,586 -324,-741 -198,144 -165,644 -80,930 -487,-504 -205))),'
                            'MULTIPOLYGON(((266 51,851 523,-781 366,-607 -581)),'
                                         '((416 -450,-973 880,103 226,-896 -857,-369 761)),'
                                         '((168 171,26 -99,-606 -490,-174 -138,-325 -218,-833 -652,-255 -445,-882 -762,-202 -560)),'
                                         '((-423 -216,-531 -190,-147 821,362 441,645 -128,-997 708,134 -426,714 -9,147 842,-887 -870,688 -330,689 17,-314 -262,401 -112,-606 761)),'
                                         '((-582 -373,-360 -84,-727 -171,412 -660,750 -846,-464 718,163 -11,489 -659,586 -324,-741 -198,144 -165,644 -80,930 -487,-504 -205))),'
                            'GEOMETRYCOLLECTION(),'
                            'MULTIPOINT(384 290,-601 123,408 86,-616 -300,160 -474,-979 -4,-63 -824,-689 -765,-219 802,-54 -93,191 -982,-723 -449),'
                            'MULTILINESTRING((683 4,864 -634,548 -891,727 -691,-570 32,-334 -438,127 -317,241 -12,-807 947,-987 693,-345 -867,854 -106)))'),
ST_GEOMFROMTEXT(
'MULTIPOINT(157 69,-725 -189,-176 -41,676 375,33 -672,-76 47)')),
ST_UNION(
ST_ENVELOPE(
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION('
                                'LINESTRING(-896 100,-793 810,243 -525,650 -373,599 170,-554 -890),'
                                'POINT(945 -828),'
                                'POINT(945 -828),'
                                'LINESTRING(-896 100,-793 810,243 -525,650 -373,599 170,-554 -890),'
                                'POINT(945 -828),'
                                'MULTIPOINT(-47 307,-768 -425,-3 167,-170 30,-784 721,951 146,407 790,37 850,-466 738),'
                                'GEOMETRYCOLLECTION(),'
                                'MULTIPOINT(-47 307,-768 -425,-3 167,-170 30,-784 721,951 146,407 790,37 850,-466 738),'
                                'MULTIPOLYGON(((104 113,688 423,-859 602,272 978)),'
                                             '((981 -394,189 -400,649 -325,-977 371,30 859,590 318,329 -894,-51 262,197 952,-846 -139,-920 399)),'
                                             '((-236 -759,834 757,857 747,437 -146,194 913,316 862,976 -491,-745 933,610 687,-149 -164,-803 -565,451 -275)),'
                                             '((572 96,-160 -607,529 930,-544 -132,458 294))))')),
ST_CENTROID(GEOMFROMTEXT('POINT(-939 -921)')))))),
ST_INTERSECTION(
ST_GEOMFROMTEXT(
'MULTILINESTRING((541 -927,-414 316,-429 -444,212 260,-125 104,445 563,-713 -975,-976 514),'
                            '(-830 882,-377 914,-915 919,-535 -23,-508 979),'
                            '(806 347,-87 220,226 -22,-12 468,707 598,83 951,-592 701,833 964,270 -932,743 -514,231 469,-575 -122,-99 -245,416 465,801 -587))'),
ST_GEOMFROMTEXT(
'LINESTRING(-96 -182,-373 75,697 687,-881 -463,-557 -959,-493 810)')));
MBRWITHIN(
ST_CENTROID(
ST_UNION(
ST_UNION(
ST_GEOMFROMTEXT(
'MULTILINESTRING((-556 966,-721 -210),'
                                    '(-202 390,-954 804,682 504,-394 -254,832 371,907 -369,827 126,-567 -337,-304 -555,-957 -483,-660 792),'
             
1
######################################################################################################
# BUG#20085563 : ASSERTION `!NULL_VALUE && OPDONE && STR_VALUE_ARG->LENGTH() > 0' FAILED
######################################################################################################
SELECT ST_ASTEXT(ST_INTERSECTION(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(GEOMETRYCOLLECTION())'), 
ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(GEOMETRYCOLLECTION(GEOMETRYCOLLECTION(GEOMETRYCOLLECTION())))')));
ST_ASTEXT(ST_INTERSECTION(ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(GEOMETRYCOLLECTION())'), 
ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(GEOMETRYCOLLECTION(GEOMETRYCOLLECTION(GEOMETRYCOLLECTION())))')))
GEOMETRYCOLLECTION()
######################################################################################################
# BUG#20111542 : SET OPERATIONS RETURN GEOMETRYCOLLECTION CONTAINING SINGLE GEOMETRY COMPONENT
######################################################################################################
SELECT ST_ASTEXT(ST_UNION(ST_GEOMFROMTEXT('MULTIPOINT(0 0,100 100)'),
ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(GEOMETRYCOLLECTION(),GEOMETRYCOLLECTION())')));
ST_ASTEXT(ST_UNION(ST_GEOMFROMTEXT('MULTIPOINT(0 0,100 100)'),
ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(GEOMETRYCOLLECTION(),GEOMETRYCOLLECTION())')))
MULTIPOINT(0 0,100 100)
SELECT ST_ASTEXT(ST_DIFFERENCE(ST_GEOMFROMTEXT('MULTIPOLYGON(((4 4,4 6,6 6,6 4)),((0 0,0 10,10 10,10 0)))'),
ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(GEOMETRYCOLLECTION(GEOMETRYCOLLECTION()))')));
ST_ASTEXT(ST_DIFFERENCE(ST_GEOMFROMTEXT('MULTIPOLYGON(((4 4,4 6,6 6,6 4)),((0 0,0 10,10 10,10 0)))'),
ST_GEOMFROMTEXT('GEOMETRYCOLLECTION(GEOMETRYCOLLECTION(GEOMETRYCOLLECTION()))')))
MULTIPOLYGON(((4 4,4 6,6 6,6 4,4 4)),((0 0,0 10,10 10,10 0,0 0)))
######################################################################################################
# BUG#20202913 : ASSERTION `DEPTH == GC_DEPTH' FAILED
######################################################################################################
SELECT ST_ASTEXT(ST_CONVEXHULL(
ST_UNION(
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION('
                                 'MULTIPOLYGON(((3 -7,9 8,7 7,-10 -8,0 7,10 1,1 -2,3 -8)),'
                                              '((-3 -4,-1 -4,-10 -3,-2 -8,0 3,9 -5,-7 6,-3 -9,-3 -7,6 -1,-3 4,0 -1,-5 0)),'
                                              '((-5 -7,8 -7,-6 -4,-10 10,3 -1))),'
                                  'MULTIPOINT(10 -3,-9 -6,-8 -4,3 -9,-6 10,-6 -10,-1 -5,9 -7,5 0,5 0),'
                                  'GEOMETRYCOLLECTION(),'
                                  'LINESTRING(-4 5,7 10,2 3,7 5,6 -8,1 9,4 -3,-3 0,-10 4,7 -3,-5 3,8 -9,-5 8,-2 2),'
                                  'POINT(4 9),MULTIPOINT(1 8,-8 5,-5 -3,1 -5,6 2,-1 -10))'),
ST_GEOMFROMTEXT('GEOMETRYCOLLECTION()'))));
ST_ASTEXT(ST_CONVEXHULL(
ST_UNION(
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION('
                                 'MULTIPOLYGON(((3 -7,9 8,7 7,-10 -8,0 7,10 1,1 -2,3 -8)),'
                                              '((-3 -4,-1 -4,-10 -3,-2 -8,0 3,9 -5,-7 6,-
POLYGON((-10 -8,-6 -10,-1 -10,8 -9,9 -7,10 -3,10 1,9 8,7 10,-10 10,-10 -8))
SELECT ST_ASTEXT(ST_UNION(
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION()'),
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION('
                             'LINESTRING(-10 -1,-2 -9,0 6,2 2,-1 -10,9 -4,6 3),'
                             'MULTIPOINT(10 8,-7 -1,-9 6),'
                             'GEOMETRYCOLLECTION('
                                 'MULTILINESTRING((3 0,8 -5,-6 5,-8 -2,5 1,-1 3),'
                                                 '(4 -1,7 -9,2 -10,10 0,-4 -6,-2 0,9 -5),'
                                                 '(-10 7,5 -5,2 8)),'
                                 'POINT(6 6),'
                                 'MULTIPOLYGON(((-7 -8,6 1,-10 -2,9 10,-6 4,-5 -7,8 2,-8 -9,-6 5,9 -2,9 -7,0 10,-8 -5,3 6,-2 7)),'
                                              '((-2 -5,3 -2,8 -9)),'
                                              '((10 -8,6 -4,0 -10,-10 -7,-5 0,-1 -1,5 -3,-5 9,5 -1,-3 -5)),'
                                              '((-1 10,2 7,-4 -1))),'
                                 'GEOMETRYCOLLECTION(),'
                                 'MULTILINESTRING((3 0,8 -5,-6 5,-8 -2,5 1,-1 3),'
                                                 '(4 -1,7 -9,2 -10,10 0,-4 -6,-2 0,9 -5),'
                                                 '(-10 7,5 -5,2 8)),'
                                 'MULTILINESTRING((3 0,8 -5,-6 5,-8 -2,5 1,-1 3),'
                                                 '(4 -1,7 -9,2 -10,10 0,-4 -6,-2 0,9 -5),'
                                                 '(-10 7,5 -5,2 8))),'
                             'GEOMETRYCOLLECTION('
                                 'MULTIPOINT(4 -10,-3 -8,9 10,-2 5,0 -7,-8 -4,-2 8,-8 1,5 -2,6 3,4 -9,5 -8,5 3,-7 -7),'
                                 'POINT(-7 1),'
                                 'LINESTRING(4 1,4 -2,2 0)),POINT(-5 -4))')));
ST_ASTEXT(ST_UNION(
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION()'),
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION('
                             'LINESTRING(-10 -1,-2 -9,0 6,2 2,-1 -10,9 -4,6 3),'
                             'MULTIPOINT(10 8,-7 -1,-9 6),'
             
GEOMETRYCOLLECTION(LINESTRING(-10 -1,-2 -9,0 6,2 2,-1 -10,9 -4,6 3),MULTIPOINT(10 8,-7 -1,-9 6),GEOMETRYCOLLECTION(MULTILINESTRING((3 0,8 -5,-6 5,-8 -2,5 1,-1 3),(4 -1,7 -9,2 -10,10 0,-4 -6,-2 0,9 -5),(-10 7,5 -5,2 8)),POINT(6 6),MULTIPOLYGON(((-7 -8,6 1,-10 -2,9 10,-6 4,-5 -7,8 2,-8 -9,-6 5,9 -2,9 -7,0 10,-8 -5,3 6,-2 7,-7 -8)),((-2 -5,3 -2,8 -9,-2 -5)),((10 -8,6 -4,0 -10,-10 -7,-5 0,-1 -1,5 -3,-5 9,5 -1,-3 -5,10 -8)),((-1 10,2 7,-4 -1,-1 10))),GEOMETRYCOLLECTION(),MULTILINESTRING((3 0,8 -5,-6 5,-8 -2,5 1,-1 3),(4 -1,7 -9,2 -10,10 0,-4 -6,-2 0,9 -5),(-10 7,5 -5,2 8)),MULTILINESTRING((3 0,8 -5,-6 5,-8 -2,5 1,-1 3),(4 -1,7 -9,2 -10,10 0,-4 -6,-2 0,9 -5),(-10 7,5 -5,2 8))),GEOMETRYCOLLECTION(MULTIPOINT(4 -10,-3 -8,9 10,-2 5,0 -7,-8 -4,-2 8,-8 1,5 -2,6 3,4 -9,5 -8,5 3,-7 -7),POINT(-7 1),LINESTRING(4 1,4 -2,2 0)),POINT(-5 -4))
######################################################################################################
# BUG#20211491 : ASSERTION `RTREE_RESULT.SIZE() != 0' FAILED
######################################################################################################
SELECT ST_ASTEXT(ST_UNION(
ST_ENVELOPE(
ST_GEOMFROMTEXT(
'LINESTRING(5 9,-1 10,-2 -6,2 9,2 0,3 6,-3 3,9 -2,-3 -10,-7 -4,1 4)')),
ST_UNION(
ST_GEOMFROMTEXT(
'MULTILINESTRING((6 -8,10 -8,3 0,-6 1,0 8,-1 8,-3 -3,6 -6,0 6,1 -6,-1 7,8 3),'
                                                   '(-9 -10,-4 0,0 1,-9 1,6 9,-8 7,-2 -6,2 10,-1 -5,3 -5,-1 -10))'),
ST_GEOMFROMTEXT(
'MULTILINESTRING((8 7,2 6,-6 -8,-2 10,4 1,9 7,5 9,4 1,8 2,-2 10,8 -5))'))));
ST_ASTEXT(ST_UNION(
ST_ENVELOPE(
ST_GEOMFROMTEXT(
'LINESTRING(5 9,-1 10,-2 -6,2 9,2 0,3 6,-3 3,9 -2,-3 -10,-7 -4,1 4)')),
ST_UNION(
ST_GEOMFROMTEXT(
'MULTILINESTRING((6 -8,10 -8,3 0,-6 1,0 8,-1 8,-3 -3,6 -6,0 6,1 -6,-1 7,8 3),'
                           
NULL
SELECT ST_ASTEXT(ST_UNION(
ST_INTERSECTION(
ST_GEOMFROMTEXT(
'MULTIPOINT(7 2,-4 -5,6 -9,-7 3,-10 5,8 -6,0 -10,10 -4,8 -10,2 6,8 -4,-8 2,-4 2)'),
ST_GEOMFROMTEXT(
'MULTIPOLYGON(((6 2,1 1,-4 5,1 4,-3 -4,-7 9,-10 2,-6 1,10 -7,0 1,9 4)))')),
ST_UNION(
ST_GEOMFROMTEXT(
'LINESTRING(-1 -5,0 -6,4 6,3 3,2 8,-2 6,-4 5,6 -7,-1 -1,-8 6,4 -2)'),
ST_GEOMFROMTEXT(
'MULTIPOLYGON(((5 -4,-5 -9,-1 -6,-3 0,5 -2)),'
                                                '((-5 -10,-8 -2,-3 7,1 5,5 -10,1 -5,0 10,3 2,1 1)),'
                                                '((4 -2,6 3,7 5,1 2,8 -9,-10 -5,7 -10,-2 -9,-2 0,2 -8,-8 3,5 0)),'
                                                '((6 -4,0 4,-8 -2,10 -10,-6 5)))'))));
ST_ASTEXT(ST_UNION(
ST_INTERSECTION(
ST_GEOMFROMTEXT(
'MULTIPOINT(7 2,-4 -5,6 -9,-7 3,-10 5,8 -6,0 -10,10 -4,8 -10,2 6,8 -4,-8 2,-4 2)'),
ST_GEOMFROMTEXT(
'MULTIPOLYGON(((6 2,1 1,-4 5,1 4,-3 -4,-7 9,-10 2,-6 1,10 -7,0 1,9 4)))')),
ST_UNION(
ST_GEOMFROMTEX
NULL
SELECT ST_CONTAINS(ST_UNION(
ST_INTERSECTION(
ST_GEOMFROMTEXT(
'POINT(-3 3)'),
ST_GEOMFROMTEXT(
'POLYGON((8 3,-2 9,-10 2,-10 -9,7 -1,4 1,7 6,5 -10,5 3,2 1,-10 0))')),
ST_CONVEXHULL(
ST_GEOMFROMTEXT(
'MULTIPOINT(8 -8,-7 5)'))),
ST_UNION(
ST_GEOMFROMTEXT('POINT(4 1)'),
ST_GEOMFROMTEXT('MULTIPOINT(-10 -10,5 -2,-6 -7,1 5,-3 0)')));
ST_CONTAINS(ST_UNION(
ST_INTERSECTION(
ST_GEOMFROMTEXT(
'POINT(-3 3)'),
ST_GEOMFROMTEXT(
'POLYGON((8 3,-2 9,-10 2,-10 -9,7 -1,4 1,7 6,5 -10,5 3,2 1,-10 0))')),
ST_CONVEXHULL(
ST_GEOMFROMTEXT(
'MULTIPOINT(8 -8,-7 5)'))),
ST_UNION(
ST_GEOMFROMTEXT('POINT(4 
0
######################################################################################################
# BUG#20211639 : ASSERTION `LHS.DENOMINATOR() != 0' FAILED
######################################################################################################
SELECT ST_ISEMPTY(ST_INTERSECTION(
ST_UNION(
ST_GEOMFROMTEXT('MULTIPOINT(-9 4,10 -4,3 -10,-6 5,2 -4,-4 -8,1 10,4 10,6 6,9 2,9 4,-10 5,-6 7)'),
ST_GEOMFROMTEXT('MULTIPOLYGON(((3 5,-7 -2,-5 -1,1 -4,2 9,-9 -6,-6 10,-7 2,9 -2,-2 1,-1 4,-3 10)),'
                                                       '((-8 4,-8 -1,0 8)),'
                                                       '((0 7,-6 -1,6 -10,5 -2,7 2,9 4,-9 -4,2 10,-3 -7,2 -9,-7 -1,-8 9)),'
                                                       '((-5 -5,-1 -9,1 3,5 -5,9 8,2 9,9 -1,6 -2,-2 6,1 -5,9 -8,-4 2,-6 0)))')),
ST_INTERSECTION(
ST_INTERSECTION(
ST_GEOMFROMTEXT('MULTIPOINT(0 -8,-5 1,8 5,9 -4,0 5,8 4,-6 7,6 9,10 0)'),
ST_GEOMFROMTEXT('MULTIPOLYGON(((2 0,-3 5,1 -4,0 10,3 9,-2 -9,9 -9,3 6,-9 -5,8 7,-3 1)))')),
ST_UNION(
ST_GEOMFROMTEXT('MULTIPOLYGON(((-1 -9,7 -7,-6 6,9 6,5 -8,9 -9,5 -8,5 3,-8 9,10 8,10 -8)),'
                                                       '((8 -3,-5 0,2 -4,-8 -5,4 10,10 -8,5 3,-8 -9,-7 -2,8 9,-3 -3,-10 7,-10 -8,-7 -10,-5 -9)),'
                                                       '((4 9,8 -7,1 -10,9 6,-4 8,-7 1,3 -3,8 2,-10 3,-8 8,-3 1,2 0)))'),
ST_GEOMFROMTEXT('LINESTRING(0 -3,8 9,10 -3,-8 7,4 4,8 -8,10 6,5 7)')))));
ST_ISEMPTY(ST_INTERSECTION(
ST_UNION(
ST_GEOMFROMTEXT('MULTIPOINT(-9 4,10 -4,3 -10,-6 5,2 -4,-4 -8,1 10,4 10,6 6,9 2,9 4,-10 5,-6 7)'),
ST_GEOMFROMTEXT('MULTIPOLYGON(((3 5,-7 -2,-5 -1,1 -4,2 9,-9 -6,-6 10,-7 2,9 -2,-2 1,-1 4,-3 10)),'
                    
0
SELECT ST_ISEMPTY(ST_INTERSECTION(
ST_CONVEXHULL(
ST_GEOMFROMTEXT('POLYGON((0 10,-4 7,10 5,-8 -6,9 1,4 7,5 0,-3 -1,9 10,-7 -5))')),
ST_UNION(
ST_GEOMFROMTEXT('MULTILINESTRING((1 3,10 -8,-5 -8,-10 8,-9 -10,-5 8,8 6,6 -6,5 -3,-3 -8,-6 1,7 8,-2 -2),'
                                                          '(5 -6,-6 -5,7 -5,8 6,0 7,-1 7,0 2,10 -7),'
                                                          '(-5 1,-10 -6,5 -3,1 -3,-3 -1,7 -1,-8 8,-4 -9,2 -3,4 -8,-3 5,-9 7,-10 9,-9 -9,5 -4))'),
ST_GEOMFROMTEXT('MULTIPOLYGON(((-10 0,-9 -8,4 -6,-8 6,0 -1,1 0,5 2,8 -5)),'
                                                       '((-9 10,4 -8,-9 5,7 -9,-5 9,3 7,-5 -7,-4 -7,1 -7,10 2)),'
                                                       '((-2 6,-2 -6,-7 -5,1 4,7 -4,5 10,7 4,-6 -4,0 4,-3 0,0 2)))'))));
ST_ISEMPTY(ST_INTERSECTION(
ST_CONVEXHULL(
ST_GEOMFROMTEXT('POLYGON((0 10,-4 7,10 5,-8 -6,9 1,4 7,5 0,-3 -1,9 10,-7 -5))')),
ST_UNION(
ST_GEOMFROMTEXT('MULTILINESTRING((1 3,10 -8,-5 -8,-10 8,-9 -10,-5 8,8 6,6 -6,5 -3,-3 -8,-6 1,7 8,-2 -2),'
              
0
SELECT ST_ISEMPTY(ST_UNION(
ST_INTERSECTION(
ST_UNION(
ST_GEOMFROMTEXT('LINESTRING(7 -3,-1 6,1 3,4 2,-1 7,3 -4,1 10,-2 3,4 9,6 -2)'),
ST_GEOMFROMTEXT('MULTIPOLYGON(((-4 3,1 -6,5 -4,-3 1,-7 -6,4 4,4 -2,0 4,-7 -1,1 -2)))')),
ST_UNION(
ST_GEOMFROMTEXT('MULTIPOINT(8 9,9 -1,0 3,10 6,-3 0,9 7,-10 -10,-8 -8,1 -3,-2 3,0 3,7 9,-4 7,-6 -6,6 6)'),
ST_GEOMFROMTEXT('MULTILINESTRING((-8 6,-4 0,-3 -8,-9 -4,-4 -10,-2 6,-4 6,4 10,0 1,2 3,-8 6,7 5,-1 7),'
                                                              '(2 7,4 7,6 -1,7 4,-9 3,3 7,-9 -7))'))),
ST_UNION(
ST_GEOMFROMTEXT('LINESTRING(-6 -6,-7 1,5 5,-1 0,5 5,-8 -6,10 -9,7 9,-2 -7,10 -1,-3 10)'),
ST_GEOMFROMTEXT('MULTILINESTRING((10 10,2 -9,-8 2,9 -2,-10 -4,10 7,-10 8,-4 7,-9 3,8 8))'))));
ST_ISEMPTY(ST_UNION(
ST_INTERSECTION(
ST_UNION(
ST_GEOMFROMTEXT('LINESTRING(7 -3,-1 6,1 3,4 2,-1 7,3 -4,1 10,-2 3,4 9,6 -2)'),
ST_GEOMFROMTEXT('MULTIPOLYGON(((-4 3,1 -6,5 -4,-3 1,-7 -6,4 4,4 -2,0 4,-7 -1,1 -2)))')),
ST_UNION(
ST_GEOMFROMTEXT('MULTIPOINT(8
0
SELECT ST_SRID(
ST_INTERSECTION(
ST_UNION(
ST_UNION(
ST_GEOMFROMTEXT(
'MULTILINESTRING((3 7,-8 8,5 10,-7 0,-6 -2,7 4,-9 9,-10 -6,9 -8),'
                                    '(9 7,-6 1,-8 8,-8 -1,10 -7,-7 -6,-1 -8,0 8,-8 10,5 -2,-3 7,-5 -5))'),
ST_GEOMFROMTEXT(
'MULTIPOLYGON(((-5 2,-1 -4,7 -1,-4 1,-7 4,-8 2,-4 -5,5 -3,-10 -6,-3 6,-2 8,5 -7,-10 -9,8 -1,2 -5)),'
                                 '((-3 -8,-3 -3,-8 -1,-5 -8,-5 -9,8 -3,-1 -2,8 -4)),'
                                 '((3 -4,7 -1,-6 -8,4 -5,4 8,9 -6)))')),
ST_CONVEXHULL(
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION('
                        'POLYGON((0 -1,10 5,-1 2,6 -1)),'
                        'POINT(-2 10),'
                        'POINT(-6 -1),'
                        'GEOMETRYCOLLECTION('
                            'MULTIPOLYGON(((3 -3,5 2,5 -1,-8 4,3 1,-9 0,9 -3,6 4,-3 1,-10 2,-10 -2,-2 5,0 -2)),'
                                         '((-6 8,2 4,-10 4,9 -10,4 5,-5 7,0 -5,8 -2,-8 -3,-7 1)),'
                                         '((5 10,3 2,-2 7,-3 6,7 0,-1 9,-5 6,8 -2))),'
                            'MULTILINESTRING((4 5,9 -10,10 10,2 -3,2 4,7 -8,6 6,-8 1,-6 -7,-7 -6,8 -4,-5 -5,0 9,10 -8)),'
                            'LINESTRING(7 9,8 3,-4 -2,-7 6,-9 -7,8 9,3 9,-4 -10,-10 9)))'))),
ST_UNION(
ST_CONVEXHULL(
ST_GEOMFROMTEXT(
'MULTIPOLYGON(((6 -4,4 9,10 -4,3 -3,7 6,0 -10,-7 1,-2 -2,9 9,9 -8,6 -3,-3 3,-1 10,-3 4)),'
                    '((-6 2,2 1,-2 1,3 -7,0 -1,7 1,-4 -1,8 2,-9 8,-10 -10,-4 -8,9 6,1 -10,9 -8)),'
                    '((-4 3,7 1,10 6,7 -5,-3 2,-2 6,-3 9,-7 -7,1 7,-3 10,9 5,-2 4,8 -3,-7 -9)))')),
ST_ENVELOPE(
ST_UNION(
ST_CONVEXHULL(
ST_ENVELOPE(
ST_UNION(
ST_ENVELOPE(
ST_GEOMFROMTEXT(
'MULTIPOINT(-9 -10,2 -1,1 -2,-8 -1,-1 -2,-9 4,-6 -10,-6 9,4 0,-7 -8,8 -9,-2 -10)')),
ST_INTERSECTION(
ST_UNION(
ST_GEOMFROMTEXT(
'POINT(-10 3)'),
ST_GEOMFROMTEXT(
'POLYGON((-1 -2,7 -1,3 0,-7 9,0 10,4 -1,-5 1,4 9,-9 -2,-3 -5,4 -6,7 5,9 4,3 0))')),
ST_ENVELOPE(
ST_CONVEXHULL(
ST_GEOMFROMTEXT(
'MULTILINESTRING((-3 2,1 10,1 9,-10 -2,2 7,-6 -8,-5 -1,10 0,6 -3),'
                                                '(-2 8,-4 6,-2 9,-4 8,-6 -7,8 9,6 6,5 -3,5 0,-8 2,-7 8,-10 -9),'
                                                '(-7 -9,0 3,10 1,7 3,-6 -5,-5 -3,6 -5,5 -4,-2 3,7 9,0 -1,-3 -1,-4 0))'))))))),
ST_UNION(
ST_INTERSECTION(
ST_GEOMFROMTEXT(
'POLYGON((0 3,9 9,-2 1,-9 -8,7 8,3 -2,-2 4,2 1,3 -9,6 -6))'),
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION('
                                    'MULTIPOLYGON(((-7 -8,-5 -10,-10 4,2 8,-7 -6,-4 -4,1 -10,-9 3,5 -9)),'
                                                 '((2 10,2 4,-7 -4,-5 1,-10 10,9 6,-4 -5)),'
                                                 '((2 6,-5 4,-5 -2,-2 -8,-1 -3,10 4,-2 5,3 -5,-9 -7)),'
                                                 '((-10 9,3 10,-5 -9)),'
                                                 '((7 -2,3 -10,-3 2,5 3))),'
                                    'POLYGON((9 3,5 2,-8 1,1 -10,-1 -6,-8 3,-4 5,-4 10,6 3,4 -4,9 -5,-5 -4,1 -6)),'
                                    'LINESTRING(-9 -8,2 10,-3 6,-10 5,6 -10,2 -10),'
                                    'MULTIPOLYGON(((-9 5,8 0,3 -6,3 0,8 -4,1 -2,-4 7,-2 -1,5 -1,-2 -8))),'
                                    'GEOMETRYCOLLECTION('
                                        'MULTIPOLYGON(((10 -8,-8 -5,8 -7,9 9)),'
                                                     '((-10 -6,-3 0,8 -9,5 -8,-9 -3,3 3,-4 -1)),'
                                                     '((4 7,8 0,7 0,-2 -3,8 -8,-3 -6,9 -10,-8 -8,-10 -10,-4 0,2 2,3 4,1 -4)))),'
                                    'POINT(-6 3),'
                                    'GEOMETRYCOLLECTION('
                                        'POINT(5 -8),'
                                        'GEOMETRYCOLLECTION(),'
                                        'MULTILINESTRING((4 10,1 5,-6 -6,3 -9,1 0,4 -9),'
                                                        '(10 1,-4 -1,-3 -7,-1 -10,-6 -8,5 -9,2 4,0 -3,2 -1,9 -6,-3 5),'
                                                        '(-8 0,5 -3,0 4,-2 -1,-4 2,-7 1,-5 -10,0 5,-3 -9,3 0)),'
                                        'POINT(5 -8)),'
                                    'MULTIPOINT(-2 -9,10 -2,-5 2,8 -10,3 -1,-8 9,-6 8,5 -7,-4 1,10 -4,6 -1,-9 4,-6 -5),'
                                    'GEOMETRYCOLLECTION())')),
ST_INTERSECTION(
ST_GEOMFROMTEXT(
'LINESTRING(4 -3,2 -10,5 -5,8 5,8 -3,-4 -9,2 -2,-3 4,-7 5,-9 -10)'),
ST_GEOMFROMTEXT('MULTIPOINT(-7 10,-9 8,3 3,5 5,10 -8,10 -9)'))))))));
ERROR HY000: Geometry overlay calculation error: geometry data is invalid in function st_intersection.
######################################################################################################
# BUG#20218936 : ASSERTION `(M_PREVIOUS_OPERATION != OVERLAY::OPERATION_CONTINUE)' FAILED
######################################################################################################
SELECT ST_CONTAINS(
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION('
            'GEOMETRYCOLLECTION('
                'GEOMETRYCOLLECTION('
                    'MULTILINESTRING((8 1,5 6)),'
                    'GEOMETRYCOLLECTION('
                        'LINESTRING(6 0,5 5,0 7,2 9,2 1,8 7,5 0,4 0,4 0),'
                        'POLYGON((1 4,2 9,7 1,1 4)),'
                        'GEOMETRYCOLLECTION('
                            'GEOMETRYCOLLECTION('
                                'MULTILINESTRING((6 2,2 6),(7 1,4 6)),'
                                'MULTIPOLYGON(((0 0,5 8,6 1,6 3,8 1,5 4,9 6,2 5,7 4,1 7,0 0))),'
                                'LINESTRING(6 2,3 1,0 4,4 6,5 2,0 5,9 0,1 7,4 2)))),'
                    'POLYGON((2 5,6 6,5 1,2 2,4 0,3 3,1 4,9 1,4 5,0 7,2 5))),'
                'MULTIPOLYGON(((9 0,5 2,5 6,9 3,1 8,7 6,8 2,4 8,3 3,9 7,9 0))),'
                'POLYGON((8 7,5 3,9 4,0 9,8 1,5 3,7 5,1 0,1 4,3 2,8 7)),'
                'POLYGON((6 4,3 9,8 0,6 4)),'
                'MULTIPOINT(6 0,9 1,4 1,2 2,6 9,4 8,9 6,9 1,5 0),'
                'LINESTRING(2 9,3 7,2 2,0 1,0 7,9 8,6 8,9 5,7 6),'
                'MULTIPOINT(9 9,1 6,6 8,5 0,6 7,3 7,8 4,6 7,9 9),'
                'MULTIPOINT(5 0,2 7,1 1,5 0,4 5,9 9,8 9,8 9,1 4),'
                'POINT(2 1)))'),
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION('
            'GEOMETRYCOLLECTION('
                'GEOMETRYCOLLECTION('
                    'GEOMETRYCOLLECTION('
                        'GEOMETRYCOLLECTION('
                            'LINESTRING(6 3,9 0),'
                            'MULTILINESTRING((5 8,2 1),(2 6,9 7)),'
                            'LINESTRING(1 2,1 7,1 3,0 5,9 0,6 3,4 2,0 5,7 2)))),'
                'GEOMETRYCOLLECTION('
                    'GEOMETRYCOLLECTION('
                        'POINT(3 0),'
                        'MULTIPOINT(3 6,9 3),'
                        'MULTIPOINT(7 0,3 7,6 6,9 8,1 6,9 6,2 5,0 0,3 4))),'
                'LINESTRING(7 0,3 6,5 0,3 3,1 6,5 6,8 0,9 3,2 9),'
                'POINT(8 2),'
                'LINESTRING(8 1,1 1),'
                'LINESTRING(5 7,3 9),'
                'POINT(1 6),'
                'MULTIPOINT(0 1,0 1),'
                'MULTILINESTRING((3 8,5 3,1 0,8 4,2 7,8 2,2 6,9 1,9 1))))'));
ST_CONTAINS(
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION('
            'GEOMETRYCOLLECTION('
                'GEOMETRYCOLLECTION('
                    'MULTILINESTRING((8 1,5 6)),'
                    'GEOMETRYCOLLECTION('
                        'LINESTRING(6 0
0
SELECT ST_CONTAINS(
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION('
            'GEOMETRYCOLLECTION('
                'LINESTRING(7 9,9 1,6 9,6 1,6 1,1 0,0 2,9 3,9 8),'
                'MULTIPOLYGON(((3 8,8 1,9 1,3 8))),'
                'GEOMETRYCOLLECTION('
                    'GEOMETRYCOLLECTION('
                        'POLYGON((5 1,7 4,7 5,5 1)),'
                        'MULTIPOINT(3 8,1 6),'
                        'MULTIPOLYGON(((2 3,9 3,8 9,8 7,9 9,5 7,1 9,6 2,1 9,7 5,2 3)),'
                                     '((4 2,9 3,7 7,1 7,8 3,9 5,5 8,5 1,0 8,4 9,4 2))))),'
                'MULTIPOINT(1 0,7 6),'
                'MULTIPOINT(2 0,6 8,2 3,4 7,4 2,6 0,1 6,4 0,0 2),'
                'GEOMETRYCOLLECTION('
                    'GEOMETRYCOLLECTION('
                        'MULTIPOLYGON(((5 4,2 1,7 3,5 4)),'
                                     '((9 3,1 5,5 3,1 9,1 2,5 3,1 8,7 1,4 2,4 0,9 3)),'
                                     '((0 2,8 4,1 7,1 8,3 4,8 0,5 4,2 7,1 3,6 8,0 2))),MULTIPOINT(9 2,9 3),POINT(7 1)))))'),
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION('
            'GEOMETRYCOLLECTION('
                'GEOMETRYCOLLECTION('
                    'GEOMETRYCOLLECTION('
                        'GEOMETRYCOLLECTION('
                            'MULTIPOINT(5 8,9 0),'
                            'MULTILINESTRING((2 4,7 9)),'
                            'GEOMETRYCOLLECTION('
                                'GEOMETRYCOLLECTION('
                                    'MULTILINESTRING((7 7,8 8)),'
                                    'MULTIPOINT(2 0,6 5),'
                                        'GEOMETRYCOLLECTION('
                                            'GEOMETRYCOLLECTION('
                                                'GEOMETRYCOLLECTION('
                                                    'GEOMETRYCOLLECTION('
                                                        'GEOMETRYCOLLECTION('
                                                            'POINT(3 2),'
                                                            'MULTILINESTRING((3 9,6 4),'
                                                                            '(2 4,5 4,4 7,8 4,5 0,1 5,5 1,2 6,8 3),'
                                                                            '(8 5,4 9),'
                                                                            '(8 9,0 6,8 5,6 8,1 8,7 4,0 7,9 7,4 0)),'
                                                            'MULTIPOLYGON(((7 0,1 7,7 5,0 4,6 4,4 1,7 4,7 4,4 9,1 0,7 0)),'
                                                                         '((8 6,4 7,2 2,8 6)),'
                                                                         '((0 9,1 3,6 7,6 1,4 4,8 7,4 6,2 8,1 0,4 2,0 9)))),'
                                                        'LINESTRING(9 5,4 3,1 5,6 9,0 1,4 6,2 6,5 8,4 2),'
                                                        'LINESTRING(5 6,1 4,4 2,5 4,0 0,8 3,4 6,8 3,7 2))),'
                                                'MULTIPOLYGON(((6 4,3 5,1 4,6 4))),'
                                                'MULTILINESTRING((4 8,6 1))))))),'
                        'MULTIPOLYGON(((6 3,7 2,0 6,6 3)),'
                                     '((9 7,0 1,6 1,9 7))),'
                        'MULTILINESTRING((7 6,8 0,4 7,9 3,0 2,8 5,5 3,7 5,9 0),'
                                        '(3 4,8 6,2 6,7 0,7 1,5 0,2 3,0 1,2 6),'
                                        '(3 7,8 5)))),'
                'MULTIPOINT(4 6,9 8),'
                'MULTIPOINT(7 9,7 7,9 8,6 7,9 8,9 2,4 5,5 2,1 7),'
                'LINESTRING(0 0,4 5),'
                'GEOMETRYCOLLECTION('
                    'GEOMETRYCOLLECTION('
                        'LINESTRING(6 5,9 7,3 6,9 1,3 4,4 3,3 3,7 9,8 2),'
                        'MULTIPOINT(1 6,1 5,3 1,2 5,1 2,8 4,0 0,5 4,1 1),'
                        'POLYGON((5 9,0 3,5 9,7 9,1 9,0 7,6 9,3 9,3 7,0 0,5 9)))),'
                'GEOMETRYCOLLECTION('
                    'POINT(7 7),'
                    'POLYGON((5 9,5 0,2 4,5 9)),'
                    'POLYGON((2 3,8 6,9 0,2 3)))))'));
ST_CONTAINS(
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION('
            'GEOMETRYCOLLECTION('
                'LINESTRING(7 9,9 1,6 9,6 1,6 1,1 0,0 2,9 3,9 8),'
                'MULTIPOLYGON(((3 8,8 1,9 1,3 8))),'
                'GEOMETRYCOLLECTION('
           
0
SELECT ST_CONTAINS(
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION('
            'GEOMETRYCOLLECTION('
                'GEOMETRYCOLLECTION('
                    'GEOMETRYCOLLECTION('
                        'MULTILINESTRING((7 3,7 7,9 5,4 2,7 8,7 8,9 3,9 6,8 4),'
                                        '(9 3,8 8),'
                                        '(5 5,3 5)),'
                        'GEOMETRYCOLLECTION('
                            'GEOMETRYCOLLECTION('
                                'LINESTRING(2 3,0 7),'
                                'GEOMETRYCOLLECTION('
                                    'GEOMETRYCOLLECTION('
                                        'LINESTRING(8 5,6 1,9 2,6 3,6 7,4 5,2 6,9 5,4 6),'
                                        'MULTILINESTRING((1 7,6 9,5 0,1 6,4 7,8 8,8 4,3 8,3 5)),'
                                        'MULTIPOINT(5 7,6 1))),'
                                'LINESTRING(6 2,3 8))),'
                        'LINESTRING(5 6,7 4))),'
                'POLYGON((0 9,0 6,8 2,4 1,9 5,5 8,7 4,1 9,0 9,1 7,0 9)),'
                'POLYGON((4 1,6 0,2 4,6 2,8 1,3 6,4 5,8 4,5 9,3 2,4 1)),'
                'POLYGON((3 9,8 1,5 7,9 2,3 5,6 2,9 4,5 5,9 0,1 4,3 9)),'
                'MULTILINESTRING((5 1,3 7),'
                                '(0 9,2 4,6 3,0 9,1 0,1 0,2 0,2 2,1 5)),'
                                'MULTIPOINT(0 4,0 7)))'),
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION('
            'GEOMETRYCOLLECTION('
                'LINESTRING(9 0,2 7),'
                'MULTIPOLYGON(((0 2,3 4,1 1,0 2))),'
                'LINESTRING(2 4,3 1,9 5,5 7,7 8,6 1,5 1,3 5,6 8),'
                'POLYGON((8 5,7 9,5 8,7 1,3 7,8 3,0 0,4 3,5 9,2 4,8 5)),'
                'LINESTRING(9 5,0 6),'
                'GEOMETRYCOLLECTION('
                    'GEOMETRYCOLLECTION('
                        'GEOMETRYCOLLECTION('
                            'GEOMETRYCOLLECTION('
                                'GEOMETRYCOLLECTION('
                                    'GEOMETRYCOLLECTION('
                                        'MULTILINESTRING((6 9,2 4),'
                                                        '(1 9,4 6,6 9,6 7,2 8,6 6,1 8,0 6,4 9),'
                                                        '(8 3,5 1)),'
                                        'MULTILINESTRING((6 6,5 5)),'
                                        'MULTIPOLYGON(((2 9,5 0,1 0,1 4,2 9,8 6,6 4,5 3,1 9,6 0,2 9)),'
                                                     '((1 2,1 2,9 0,7 0,3 7,8 0,9 0,1 4,0 4,4 4,1 2)),'
                                                     '((4 6,0 5,8 8,4 0,0 0,6 0,1 1,8 3,5 9,9 0,4 6)))),'
                                    'LINESTRING(7 8,0 9,5 8,9 5,1 4,6 7,8 1,4 0,4 4),'
                                    'GEOMETRYCOLLECTION('
                                        'GEOMETRYCOLLECTION('
                                            'GEOMETRYCOLLECTION('
                                                'GEOMETRYCOLLECTION('
                                                    'GEOMETRYCOLLECTION('
                                                        'GEOMETRYCOLLECTION('
                                                            'GEOMETRYCOLLECTION('
                                                                'LINESTRING(2 1,6 7,6 4,0 5,3 3,4 7,6 3,2 5,4 3),'
                                                                'MULTILINESTRING((5 8,9 1,7 9,6 1,8 9,9 9,2 3,0 5,7 9)),'
                                                                'MULTIPOLYGON(((6 3,3 3,6 6,0 2,6 5,0 8,6 8,7 2,5 3,6 6,6 3))))))),'
                                                 'MULTIPOLYGON(((2 4,6 8,9 9,2 4)),'
                                                              '((5 1,3 7,5 9,8 6,8 2,5 8,0 7,1 9,0 6,1 9,5 1))),'
                                                              'POINT(1 3))))))),'
                        'MULTILINESTRING((9 7,4 4,9 1,1 2,0 0,7 9,2 0,4 9,0 1)),'
                        'POINT(3 7)))))'));
ST_CONTAINS(
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION('
            'GEOMETRYCOLLECTION('
                'GEOMETRYCOLLECTION('
                    'GEOMETRYCOLLECTION('
                        'MULTILINESTRING((7 3,7 7,9 5,4 2,7 8,7 8,9 3,9 6,8 4),'
        
0
######################################################################################################
# More GIS crashes/assertion failure test cases
######################################################################################################
SELECT MBRCONTAINS(ST_UNION(
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION('
                               'POLYGON((1 7,4 5,7 -.1,7 2,5 4,2 2,4 +.7,-1.9 2,4 1,1 7)),'
                               'MULTIPOINT(+.6 +.0,6 -1,6 -1032.34324,0 -2.9,6 0),'
                               'MULTILINESTRING((7 3,-5.8 3,4 7,4 2.232432)))',10),
ST_GEOMFROMTEXT(
'MULTIPOINT(7.0 5,2 -9.2,9 8,6 -0,3 5,1 7,3 7)',10)),
ST_UNION(ST_GEOMFROMWKB(ST_ASWKB(ST_GEOMFROMTEXT('POINT(0 2.232432)')),10),
ST_GEOMFROMTEXT('POINT(4 +.5)',10)));
MBRCONTAINS(ST_UNION(
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION('
                               'POLYGON((1 7,4 5,7 -.1,7 2,5 4,2 2,4 +.7,-1.9 2,4 1,1 7)),'
                               'MULTIPOINT(+.6 +.0,6 -1,6 -1032.34324,0 -2.9,6 0),'
                  
1
SELECT ST_INTERSECTS(ST_SYMDIFFERENCE(
ST_GEOMFROMTEXT(
'MULTIPOINT(1 0,8.5 0,5 1,8.3 4,7 -5.0)'),
ST_GEOMFROMTEXT(
'MULTIPOLYGON(((3 8,6 1,9.5 4,5 2,9 2,-1032.34324 -1032.34324,4 -4.6,4 2,3 8),'
                                           '(5 9,2 4,6 -.8,4 +.0,-0 1,8 9.6,5 9),'
                                           '(8 5,3 4,3 1,0 1,6 -.5,8 -7.0,8 5),'
                                           '(8 6,0 1,9 5,7 5,5 3,2.232432 0,8 6)),'
                                          '((5 1,7 7,-1032.34324 7,8 -1,5 0,5 1),'
                                           '(2 9,2.232432 +.6,2 8,4 -4.4,-1032.34324 9,9 +.6,8 1,-.0 1,1 2,7 2,6 -5,2 1,-2 9,2 9),'
                                           '(7 8,0 4,7 8)),'
                                          '((5 0,7 1,5 0)),'
                                          '((3 9,8 5,0 -1032.34324,7 +.9,3 9),'
                                           '(9 9,7 2,0.4 7,9 9),'
                                           '(1 4,4 0,0 2,6.9 6,2.232432 -.8,7 3,1 4)))')),
ST_UNION(ST_GEOMFROMTEXT('MULTILINESTRING((-.5 9,1 1,1 6,6 6),(6 -.5,6 -.2,6 9,2 4),(4 7),(8 7,5 5,9 3,8 -.3))'),
ST_GEOMFROMTEXT('POINT()')));
ERROR 22023: Invalid GIS data provided to function st_within.
SELECT ST_TOUCHES(ST_INTERSECTION(
ST_GEOMFROMTEXT(
'POLYGON((6 9,0 0,10.0002 -6,6 9),'
                                  '(5 7,2 7,9 6,9 9,2 0,3 7,+.7 1,2.232432 9,8 +.3,5 7),'
                                  '(0 6,5 9,-.0 0,7 4,2 -3,2 7,9 2,0 6))'),
ST_GEOMFROMTEXT('POINT(7 8)',0)),
ST_DIFFERENCE(
ST_GEOMFROMWKB(
MULTIPOINT(POINT(-3.4,2),POINT(9,5),POINT(8,9),POINT(-.0,-.7),POINT(8,1.8),POINT(-5.0,9),POINT(4,3),
POINT(8,-9.9),POINT(1,9),POINT(+.7,3),POINT(1,1),POINT(1,0),POINT(+.3,.7),POINT(4,7),POINT(2,-.0))),
ST_GEOMFROMWKB(POINT(0,2))));
ST_TOUCHES(ST_INTERSECTION(
ST_GEOMFROMTEXT(
'POLYGON((6 9,0 0,10.0002 -6,6 9),'
                                  '(5 7,2 7,9 6,9 9,2 0,3 7,+.7 1,2.232432 9,8 +.3,5 7),'
                                  '(0 6,5 9,-.0 0,7 4,2 -3,2 7,9 2,0 6))'),
ST_GEOMF
0
SELECT MBRCONTAINS(ST_UNION(
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION('
                               'POLYGON((1 7,4 5,7 -.1,7 2,5 4,2 2,4 +.7,-1.9 2,4 1,1 7)),'
                               'MULTIPOINT(+.6 +.0,6 -1,6 -1032.34324,0 -2.9,6 0),'
                               'MULTILINESTRING((7 3,-5.8 3,4 7,4 2.232432)))',10),
ST_GEOMFROMTEXT('MULTIPOINT(7.0 5,2 -9.2,9 8,6 -0,3 5,1 7,3 7)',10)),
ST_UNION(
ST_GEOMFROMWKB(
ST_ASWKB(ST_GEOMFROMTEXT('POINT(0 2.232432)')),10),ST_GEOMFROMTEXT('POINT(4 +.5)',10)));
MBRCONTAINS(ST_UNION(
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION('
                               'POLYGON((1 7,4 5,7 -.1,7 2,5 4,2 2,4 +.7,-1.9 2,4 1,1 7)),'
                               'MULTIPOINT(+.6 +.0,6 -1,6 -1032.34324,0 -2.9,6 0),'
                  
1
SELECT ST_CONTAINS(ST_UNION(
ST_GEOMFROMWKB(
GEOMETRYCOLLECTION(
POINT(1,6),
MULTIPOLYGON(
POLYGON(LINESTRING(POINT(6,3),POINT(3,0),POINT(2.7,2),POINT(2,8),POINT(1,5.8),POINT(6,3))),
POLYGON(LINESTRING(POINT(2,4),POINT(0,9),POINT(2,4)),
LINESTRING(POINT(5,4),POINT(5,1),POINT(5,4)))),
MULTIPOLYGON(
POLYGON(LINESTRING(POINT(1,9),POINT(-.9,.3),POINT(1,9)),
LINESTRING(POINT(1,9),POINT(1,1.6),POINT(8,5),POINT(7,2),POINT(6,9.9),POINT(1,2),
POINT(0,0),POINT(7,3),POINT(2,6),POINT(8,3),POINT(4,-.8),POINT(1,9)),
LINESTRING(POINT(1,8),POINT(3,3),POINT(+.5,9),POINT(-9.3,0),POINT(8,5),POINT(+.4,+.2),
POINT(7,+.6),POINT(7,7),POINT(2,4),POINT(2,2),POINT(6,0),POINT(1,8)),
LINESTRING(POINT(6,0),POINT(8,2),POINT(0,1),POINT(-.9,.9),POINT(6,0)),
LINESTRING(POINT(0,8),POINT(1,9),POINT(2,3),POINT(3,2),POINT(4,-3.2),POINT(7,6),POINT(4,9),
POINT(3,5),POINT(7,-.0),POINT(1,2),POINT(4,-.8),POINT(-2.3,7),POINT(9,4),POINT(0,8)),
LINESTRING(POINT(3,6),POINT(5,7),POINT(2,2),POINT(3,2),POINT(7,1),POINT(2,2),
POINT(3,9),POINT(5,7),POINT(8,2),POINT(5,6),POINT(3,6))),
POLYGON(LINESTRING(POINT(0,3),POINT(3,-.4),POINT(-.2,3),POINT(5,4.6),POINT(-2.7,8),POINT(0,3)))))),
ST_GEOMFROMTEXT('POINT(-1032.34324 -.9)')),
ST_UNION(
ST_GEOMFROMWKB(
ST_ASWKB(
ST_GEOMFROMTEXT(
'GEOMETRYCOLLECTION('
                                       'MULTILINESTRING((5 5,6 3,+.8 -8,8 3),(2 2,1 3,8 4)),'
                                       'MULTIPOINT(2 3,9 3,9 7,+.2 0,1 2),'
                                       'MULTIPOLYGON(((2 1,2.232432 7.2,-0.7654 2,3 9,9 9,1 0,-0.7654 5,2 1),'
                                                     '(8 2,2 1,8 2),'
                                                     '(3 2,8.5 3,+.7 2,7 5,2 1,1 6,1 7,-9.4 6,3 2),'
                                                     '(5 9,7 +.5,5 9),'
                                                     '(6 8,-0.7654 1,6 8),'
                                                     '(0 9,9 0,5 4,6 -0.7654,-5 1,0 9))))'))),
ST_GEOMFROMTEXT('MULTIPOLYGON(((5 2,1 -0.7654,-6.3 9,6 3,2 6,7 6,4 -0.7654,2 +.2,-0.7654 9,5 2)))')));
ERROR 22023: Invalid GIS data provided to function st_within.
SELECT MBROVERLAPS(ST_INTERSECTION(
ST_GEOMFROMWKB(
GEOMETRYCOLLECTION(
MULTILINESTRING(
LINESTRING(POINT(3,3)),
LINESTRING(POINT(3,5)),
LINESTRING(POINT(8,0),POINT(6,0),POINT(9,7),POINT(5,6),POINT(7,5),POINT(-5.6,4)),
LINESTRING(POINT(7,1),POINT(5,9),POINT(5,0),POINT(2,1),POINT(1,5),POINT(5,+.8),POINT(-.8,9),POINT(0,3),POINT(2.0,3)),
LINESTRING(POINT(2,8),POINT(0,2),POINT(.5,-.2),POINT(2,1)),
LINESTRING(POINT(9,8.8),POINT(-.3,.1),POINT(2,2),POINT(2,8))),
POLYGON(
LINESTRING(POINT(6,8),POINT(4,1),POINT(6,8),POINT(-.2,2),POINT(6,6.3),POINT(3,7),POINT(4,7.1),POINT(6,8))),
MULTILINESTRING(
LINESTRING(POINT(9,9))))),
ST_GEOMFROMWKB(
ST_ASWKB(
ST_GEOMFROMTEXT(
'MULTIPOLYGON(((6 4,3 3,-8.4 6,-.0 4,6 4)))')))),
ST_DIFFERENCE(
ST_GEOMFROMTEXT('LINESTRING(3.2 2)'),
ST_GEOMFROMTEXT('LINESTRING(7 3,-2 10.0002,1 6,3 7)',10)));
ERROR HY000: Geometry overlay calculation error: geometry data is invalid in function st_intersection.
SELECT ST_ASTEXT(ST_INTERSECTION(
ST_GEOMFROMTEXT('POLYGON((6 8, 4 1, 6 8, -0.2 2,6 6.3, 3 7, 4 7.1, 6 8))'),
ST_GEOMFROMTEXT('MULTIPOLYGON(((6 4,3 3,-8.4 6,-.0 4,6 4)))')));
ERROR HY000: Geometry overlay calculation error: geometry data is invalid in function st_intersection.
SELECT MBRWITHIN(ST_SYMDIFFERENCE(
ST_GEOMFROMWKB(POINT(3,8),10),
ST_GEOMFROMWKB(
ST_ASWKB(
ST_GEOMFROMTEXT(
'MULTILINESTRING((10.0002 6,6 9,1 2,2 -6),(-2 -1032.34324,6 189.7654,6 -.6,-.0 -.6,5 0),(0.6 1,5 0,1 -6,6 1))')),10)),
ST_INTERSECTION(
ST_GEOMFROMTEXT('MULTIPOINT(+.8 4,5 -2,6 10.0002,4 9,1 3)'),
ST_GEOMFROMWKB(MULTIPOINT(POINT(8,5),POINT(9,4),POINT(-0.5,-.9)))));
MBRWITHIN(ST_SYMDIFFERENCE(
ST_GEOMFROMWKB(POINT(3,8),10),
ST_GEOMFROMWKB(
ST_ASWKB(
ST_GEOMFROMTEXT(
'MULTILINESTRING((10.0002 6,6 9,1 2,2 -6),(-2 -1032.34324,6 189.7654,6 -.6,-.0 -.6,5 0),(0.6 1,5 0,1 -6,6 1))')),10)),
ST_INTERSECTION(
ST_GEOMFROMTEXT('
NULL
SELECT ST_DISJOINT(ST_GEOMFROMTEXT(
'MULTIPOINT(189.7654 2)'),
ST_GEOMFROMWKB(
GEOMETRYCOLLECTION(
MULTIPOINT(POINT(7,5),POINT(5,-.5),POINT(0,2),POINT(6.9,0)),
POLYGON(
LINESTRING(POINT(4,0),POINT(5,8),POINT(6.3,7),POINT(5,-.4),POINT(4,0))),
POLYGON(
LINESTRING(POINT(7,6),POINT(2,8),POINT(7,3),POINT(1,3),POINT(0,4),POINT(7,+.0),POINT(4,5),POINT(3,6),POINT(7,6)),
LINESTRING(POINT(2,5),POINT(4,7),POINT(6,5),POINT(4,-1.0),POINT(9,0),POINT(-1.9,-.6),POINT(9,0),POINT(2,5))),
MULTIPOINT(POINT(9,5),POINT(2,-0.7),POINT(6,1),POINT(1,1)),
LINESTRING(POINT(-.3,4),POINT(4,9),POINT(0,+.9),POINT(6.8,3),POINT(4,3),POINT(1,0.3)),
MULTIPOLYGON(
POLYGON(
LINESTRING(POINT(7,2),POINT(0,5),POINT(7,2))),
POLYGON(
LINESTRING(POINT(9,5),POINT(2,0),POINT(9,5)),
LINESTRING(POINT(8,9),POINT(0,-6.9),POINT(5,3),POINT(0,1),POINT(7,0.9),POINT(3,0),POINT(+.4,0),POINT(3,6),POINT(8,9))),
POLYGON(
LINESTRING(POINT(0,2),POINT(7,3),POINT(5,0),POINT(0,1),POINT(1,0),POINT(7,3),POINT(6,3),POINT(2,5),POINT(0,2))),
POLYGON(
LINESTRING(POINT(8,9),POINT(8,1),POINT(-.9,-.8),POINT(4,6),POINT(8,9)),
LINESTRING(POINT(2,8),POINT(6,7),POINT(8,+.2),POINT(5,-6.1),POINT(4,5),POINT(4,-.2),
POINT(1,5),POINT(-3.6,5),POINT(6,3),POINT(2,8),POINT(7,1.2),POINT(2,8)))))));
ERROR 22023: Invalid GIS data provided to function st_within.
SELECT ST_ASTEXT(ST_INTERSECTION(
ST_GEOMFROMWKB(
GEOMETRYCOLLECTION(
POINT(7,7),
POLYGON(
LINESTRING(POINT(4,9),POINT(5,6),POINT(9,-.9),POINT(8,8),POINT(1,1),POINT(5,5),
POINT(8,-0.8),POINT(7,4),POINT(0,+.8),POINT(0,8),POINT(5,8),POINT(4,9))),
POLYGON(
LINESTRING(POINT(2,2),POINT(3,9.5),POINT(2.2,1),POINT(-6.1,0),POINT(1,9),POINT(2,2)),
LINESTRING(POINT(0,8),POINT(0,0),POINT(3,-8.6),POINT(0,7),POINT(2,-.9),POINT(0,9),POINT(8,0),POINT(7,0),POINT(0,8))),
POLYGON(
LINESTRING(POINT(3,2),POINT(8,8),POINT(0,9),POINT(4,7.9),POINT(3,4),POINT(2,0),POINT(0,0),POINT(4,6.0),POINT(3,2))),
LINESTRING(POINT(5,2),POINT(9,2),POINT(7,5),POINT(5,1)),
MULTIPOINT(POINT(1,8),POINT(.6,8),POINT(.8,3)))),
ST_GEOMFROMTEXT(
'POLYGON((3 6,2 3,2 8,3 -1.6,4 -0.7654,3 6))')));
ERROR HY000: Geometry overlay calculation error: geometry data is invalid in function st_intersection.
SELECT MBREQUALS(ST_SYMDIFFERENCE(
ST_GEOMFROMTEXT(
'POINT(5 0)'),
ST_GEOMFROMTEXT(
'MULTIPOLYGON(((8 1,5 8,5 -5.7,9 8,5 9,8 1),'
                                        '(7 5,5 7.6,0 2,3 7,0 5,2 9,7 5)),'
                                       '((2 4,6 0,+.8 7,3 2,-4 8,2 -0,+.2 1,2 4)))')),
ST_UNION(ST_GEOMFROMWKB(
ST_ASWKB(
ST_GEOMFROMTEXT(
'POLYGON((7 3,2 7,7 3),'
                                              '(2 4,6 2,1 7,-2.7 5,0 4,-3.4 3,3 8,2 4),'
                                              '(8 0,189.7654 10.0002,9 1.1,1 0,6 -2.6,4 10.0002,1 8,8 0))'))),
ST_GEOMFROMTEXT('LINESTRING(6 1)')));
MBREQUALS(ST_SYMDIFFERENCE(
ST_GEOMFROMTEXT(
'POINT(5 0)'),
ST_GEOMFROMTEXT(
'MULTIPOLYGON(((8 1,5 8,5 -5.7,9 8,5 9,8 1),'
                                        '(7 5,5 7.6,0 2,3 7,0 5,2 9,7 5)),'
                                       '((2 4,6 0,+.8 7,
0
SELECT ST_INTERSECTS(ST_SYMDIFFERENCE(
ST_GEOMFROMTEXT(
'MULTIPOINT(1 0,8.5 0,5 1,8.3 4,7 -5.0)'),
ST_GEOMFROMTEXT('MULTIPOLYGON(((3 8,6 1,9.5 4,5 2,9 2,-1032.34324 -1032.34324,4 -4.6,4 2,3 8),'
                                                       '(5 9,2 4,6 -.8,4 +.0,-0 1,8 9.6,5 9),'
                                                       '(8 5,3 4,3 1,0 1,6 -.5,8 -7.0,8 5),'
                                                       '(8 6,0 1,9 5,7 5,5 3,2.232432 0,8 6)),'
                                                      '((5 1,7 7,-1032.34324 7,8 -1,5 0,5 1),'
                                                       '(2 9,2.232432 +.6,2 8,4 -4.4,-1032.34324 9,9 +.6,8 1,-.0 1,1 2,7 2,6 -5,2 1,-2 9,2 9),'
                                                       '(7 8,0 4,7 8)),'
                                                      '((5 0,7 1,5 0)),'
                                                      '((3 9,8 5,0 -1032.34324,7 +.9,3 9),(9 9,7 2,0.4 7,9 9),(1 4,4 0,0 2,6.9 6,2.232432 -.8,7 3,1 4)))')),
ST_UNION(
ST_GEOMFROMTEXT(
'MULTILINESTRING((-.5 9,1 1,1 6,6 6),(6 -.5,6 -.2,6 9,2 4),(4 7),(8 7,5 5,9 3,8 -.3))'),
ST_GEOMFROMTEXT('POINT()')));
ERROR 22023: Invalid GIS data provided to function st_within.
SELECT ST_INTERSECTS(ST_GEOMFROMWKB(ST_ASWKB(ST_GEOMFROMTEXT('MULTIPOLYGON(((4 4,9 10.0002,4 4),(5 0,2 6,5 0)))'))),
ST_GEOMFROMWKB(MULTIPOINT(POINT(8,9))));
ERROR 22023: Invalid GIS data provided to function st_disjoint.
SELECT ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('POINT(10 10)')));
ST_ASTEXT(ST_CONVEXHULL(ST_GEOMFROMTEXT('POINT(10 10)')))
POINT(10 10)
